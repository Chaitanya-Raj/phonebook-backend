{"version":3,"sources":["components/filter.js","components/personform.js","components/person.js","components/persons.js","services/personService.js","components/notification.js","App.js","index.js"],"names":["Filter","filter","handleFilter","value","onChange","PersonForm","newName","newNumber","handleNameChange","handleNumberChange","handleSubmit","onSubmit","type","Person","person","deletePerson","name","number","onClick","id","Persons","persons","map","key","baseURL","Axios","get","newPerson","post","put","delete","Notification","message","className","App","useState","setPersons","filteredPersons","setFilteredPersons","setNewName","setNewNumber","setFilter","msg","notification","setNotification","useEffect","syncPersons","personService","then","response","data","showNotification","setTimeout","event","target","toLowerCase","startsWith","preventDefault","some","existingPerson","find","window","confirm","catch","error","status","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8ce042d6.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = ({ filter, handleFilter }) => {\r\n  return (\r\n    <p>\r\n      filter shown with <input value={filter} onChange={handleFilter} />\r\n    </p>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  newName,\r\n  newNumber,\r\n  handleNameChange,\r\n  handleNumberChange,\r\n  handleSubmit,\r\n}) => {\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <div>\r\n        name: <input value={newName} onChange={handleNameChange} />\r\n        <div>\r\n          number: <input value={newNumber} onChange={handleNumberChange} />\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Person = ({ person, deletePerson }) => {\r\n  return (\r\n    <p>\r\n      {person.name} {person.number}{\" \"}\r\n      <button onClick={() => deletePerson(person.id)}>Delete</button>\r\n    </p>\r\n  );\r\n};\r\n\r\nexport default Person;\r\n","import React from \"react\";\r\nimport Person from \"./person\";\r\n\r\nconst Persons = ({ persons, deletePerson }) =>\r\n  persons.map((person) => (\r\n    <Person key={person.name} person={person} deletePerson={deletePerson} />\r\n  ));\r\n\r\nexport default Persons;\r\n","import Axios from \"axios\";\r\n\r\nconst baseURL = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  return Axios.get(baseURL);\r\n};\r\n\r\nconst createNew = (newPerson) => {\r\n  return Axios.post(baseURL, newPerson);\r\n};\r\n\r\nconst updatePerson = (id, newPerson) => {\r\n  return Axios.put(`${baseURL}/${id}`, newPerson);\r\n};\r\n\r\nconst deletePerson = (id) => {\r\n  return Axios.delete(`${baseURL}/${id}`);\r\n};\r\n\r\nexport default { getAll, createNew, updatePerson, deletePerson };\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message, className }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div className={className}>{message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/filter\";\nimport PersonForm from \"./components/personform\";\nimport Persons from \"./components/persons\";\nimport personService from \"./services/personService\";\nimport Notification from \"./components/notification\";\nimport \"./App.css\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [filteredPersons, setFilteredPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [notification, setNotification] = useState({\n    msg: null,\n    className: null,\n  });\n\n  useEffect(() => {\n    syncPersons();\n  }, []);\n\n  const syncPersons = () => {\n    personService.getAll().then((response) => {\n      setPersons(response.data);\n      setFilteredPersons(response.data);\n    });\n  };\n\n  const showNotification = (msg, className) => {\n    setNotification({\n      msg,\n      className,\n    });\n    setTimeout(() => {\n      setNotification({\n        msg: null,\n        className: null,\n      });\n    }, 5000);\n    syncPersons();\n  };\n\n  const deletePerson = (id) => {\n    if (\n      window.confirm(\n        `Delete ${persons.find((person) => person.id === id).name}?`\n      )\n    ) {\n      personService.deletePerson(id).then(() => {\n        showNotification(\n          `Deleted ${persons.find((person) => person.id === id).name}`,\n          \"notification\"\n        );\n      });\n    }\n  };\n\n  const handleFilter = (event) => {\n    setFilter(event.target.value);\n    setFilteredPersons(\n      persons.filter((person) =>\n        person.name.toLowerCase().startsWith(event.target.value.toLowerCase())\n      )\n    );\n  };\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    let newPerson = { name: newName, number: newNumber };\n    if (persons.some((person) => person.name === newName)) {\n      let existingPerson = persons.find((person) => person.name === newName);\n      if (\n        window.confirm(\n          `${existingPerson.name} is already added to phonebook, replace the old number with a new one?`\n        )\n      ) {\n        personService\n          .updatePerson(existingPerson.id, newPerson)\n          .then(() => {\n            showNotification(`Updated ${newPerson.name}`, \"notification\");\n          })\n          .catch((error) => {\n            if (error.response.status === 500)\n              showNotification(\n                `Information of ${newPerson.name} has already been removed from the server`,\n                \"error\"\n              );\n            else {\n              showNotification(error.response.data.error, \"error\");\n            }\n          });\n      }\n    } else {\n      personService\n        .createNew(newPerson)\n        .then(() => {\n          showNotification(`Added ${newPerson.name}`, \"notification\");\n        })\n        .catch((error) => {\n          showNotification(error.response.data.error, \"error\");\n        });\n    }\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  return (\n    <div>\n      <Notification\n        message={notification.msg}\n        className={notification.className}\n      />\n      <h2>Phonebook</h2>\n\n      <Filter filter={filter} handleFilter={handleFilter} />\n\n      <h3>add a new</h3>\n\n      <PersonForm\n        newName={newName}\n        newNumber={newNumber}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        handleSubmit={handleSubmit}\n      />\n\n      <h3>Numbers</h3>\n\n      <Persons persons={filteredPersons} deletePerson={deletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}